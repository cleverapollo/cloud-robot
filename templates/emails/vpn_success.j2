{% extends "emails/base.j2" %}

{% block title %}Your VPN Tunnel(s) {% if build %}built{% else %}updated{% endif %} successfully!{% endblock %}

{% block content %}
<p>You are receiving this email because you requested for a VPN to be built.</p>
<p>You must now configure the VPN on your hardware following the instructions below, in order to connect.</p>
<hr />
<h3>Step 1</h3>
<p>Before connecting to a VPN Tunnel, ensure that your Project is reachable.</p>
<p>You can check this by pinging the Virtual Router of the Project at <b>{{ vr_ip_address }}</b>.</p>
<hr />
<h3>Step 2</h3>
<p>After ensuring the Project is accessible, configure the VPN settings on your local router with the settings in the table below.</p>
<hr />
<h3>Step 3</h3>
<p>After configuring the VPN on your local hardware, test that it works by pinging the gateway of a Project Subnet;<p>
<hr />
<h2>VPN Configuration</h2>
<table class="align-left">
  {# Addresses #}
  <tr><th colspan="2" class="align-center" style="font-size:1.5em;">Address Details</th></tr>
  <tr><th>Local Router Address</th><td>{{ ike_public_ip }}</td></tr>
  <tr><th>Remote Router Address</th><td>{{ vr_ip_address'] }}</td></tr>
  <tr><th>Local Proxy ID</th><td>{{ customer_proxy_id }}</td></tr>
  <tr><th>Remote Proxy ID</th><td>{{ cloud_proxy_id }}</td></tr>
  {# IKE Settings #}
  <tr><th colspan="2" class="align-center" style="padding-top:1em;font-size:1.5em;">IKE (Phase 1) Settings</th></tr>
  <tr><th>Authentication</th><td>{{ ike_authentication }}</td></tr>
  <tr><th>Diffie-Hellman (DH) Group</th><td>{{ ike_dh_groups }}</td></tr>
  <tr><th>Encryption</th><td>{{ ike_encryption }}</td></tr>
  <tr><th>IKE Version</th><td>{{ ike_version }}</td></tr>
  <tr><th>Lifetime (in seconds)</th><td>{{ ike_lifetime }}</td></tr>
  <tr><th>Mode</th><td>{{ ike_mode }}</td></tr>
  <tr><th>Pre Shared Key</th><td>{{ ike_pre_shared_key }}</td></tr>
  {# IPSec Settings #}
  <tr><th colspan="2" class="align-center" style="padding-top:1em;font-size:1.5em;">IPSec (Phase 2) Settings</th></tr>
  <tr><th>Authentication</th><td>{{ ipsec_authentication }}</td></tr>
  <tr><th>Encapsulation Mode</th><td>Tunnel</td></tr>
  <tr><th>Establish Tunnel</th><td>{{ ipsec_establish_time }}</td></tr>
  <tr><th>Encryption</th><td>{{ ipsec_encryption }}</td></tr>
  <tr><th>Lifetime (in seconds)</th><td>{{ ipsec_lifetime }}</td></tr>
  <tr><th>PFS Group</th><td>{{ ipsec_pfs_groups }}</td></tr>
  <tr><th>Protocol</th><td>esp</td></tr>
</table>
{% endblock %}
